Ext.ucf.element_selector=function(A,f,v,p,w,k){var B=k.addBtnText||"add",C=k.removeBtnText||"remove",D=k.addAllBtnText||"add all",E=k.removeAllBtnText||"remove all",F=k.upBtnText||"up",G=k.downBtnText||"down",x=k.ListViewWidth||200,y=k.ListViewHeight||250,r,t,q,u,h,z,l=function(b){var a=[],c=[],d=[],e=[];Ext.each(b,function(a,b){d[a]="";e[b]=a});Ext.each(p,function(a,b){void 0!=a.get(f)&&void 0!=d[a.get(f)]?d[a.get(f)]=a:c.push(a)});Ext.each(e,function(b,m){""!=d[b]&&a.push(d[b])});b=Ext.ucf.toJson(a);
var g={};g.root=b;g.total=b.length;g.success=!0;g.records=a;b=Ext.ucf.toJson(c);var m={};m.root=b;m.total=b.length;m.success=!0;m.records=c;t.loadData(m,!1);q.loadData(g,!1)},n=function(){for(var b=[],a=0;a<q.data.length;a++){var c=q.data.get(a);b.push(c.get(f))}return b},H=function(){var b=n(),a=h.getSelectedRecords(),c=[];for(i=0;i<a.length;i++)c[a[i].get(f)]="";var d=[];Ext.each(b,function(a){void 0==c[a]&&d.push(a)});l(d)},I=function(){var b=n(),a=h.getSelectedIndexes();a.sort(function(a,b){return a-
b});var c=!1;if(0<a.length&&0<a[0]){var d=[];for(i=0;i<a.length;i++){var e=h.store.getAt(a[i]);d[e.get(f)]=""}Ext.each(b,function(a,e){void 0!=d[a]&&(b[e]=b[e-1],b[e-1]=a,c=!0)})}c&&l(b);var g=[];Ext.each(a,function(a){g.push(c?a-1:a)});h.select(g)},J=function(){var b=n(),a=h.getSelectedIndexes();a.sort(function(a,b){return a-b});var c=!1;if(0<a.length&&a[a.length-1]<b.length-1){var d=[];for(i=a.length-1;0<=i;i--){var e=h.store.getAt(a[i]);d[e.get(f)]=""}for(idx=b.length-1;0<=idx;idx--)e=b[idx],void 0!=
d[e]&&(b[idx]=b[idx+1],b[idx+1]=e,c=!0)}c&&l(b);var g=[];Ext.each(a,function(a){g.push(c?a+1:a)});h.select(g)};return{getCurrentSelectedKeys:function(){return n()},makePanel:function(){var b={root:[],total:0,success:!0};b.records=p;var a={root:[],total:0,success:!0};a.records=p;r=new Ext.data.JsonReader({idProperty:f,root:"root",totalProperty:"total",successProperty:"success"},A);t=new Ext.data.Store({reader:r,data:a});q=new Ext.data.Store({reader:r,data:b});u=new Ext.ListView({store:t,width:x,height:y,
autoHeight:!0,multiSelect:!0,simpleSelect:!0,columnResize:!1,columnSort:!1,columns:v});h=new Ext.ListView({store:q,width:x,height:y,autoHeight:!0,multiSelect:!0,simpleSelect:!0,columnResize:!1,columnSort:!1,columns:v});b=new Ext.Button({cls:"x-btn-small",text:"&nbsp;&nbsp;&nbsp;&nbsp;"+B+"&nbsp;&nbsp;&nbsp;&nbsp;",handler:function(){var a=n(),b=u.getSelectedRecords();for(i=0;i<b.length;i++)a.push(b[i].get(f));l(a)}});a=new Ext.Button({cls:"x-btn-small",text:"&nbsp;&nbsp;&nbsp;&nbsp;"+C+"&nbsp;&nbsp;&nbsp;&nbsp;",
handler:function(){H()}});var c=new Ext.Button({cls:"x-btn-small",text:"&nbsp;&nbsp;&nbsp;&nbsp;"+D+"&nbsp;&nbsp;&nbsp;&nbsp;",handler:function(){var a=n(),b=[];for(i=0;i<a.length;i++)b[a[i]]="";for(i=0;i<p.length;i++){var c=p[i];""!=b[c.get(f)]&&a.push(c.get(f))}l(a)}}),d=new Ext.Button({cls:"x-btn-small",text:"&nbsp;&nbsp;&nbsp;&nbsp;"+E+"&nbsp;&nbsp;&nbsp;&nbsp;",handler:function(){l([])}});b=new Ext.Panel({border:!1,frame:!1,padding:5,layoutConfig:{},items:[b,{xtype:"spacer",width:"5px"},a,{xtype:"spacer",
width:"5px"},c,{xtype:"spacer",width:"5px"},d],defaults:{border:!1,frame:!1}});a=new Ext.Button({cls:"x-btn-medium",text:"&nbsp;&nbsp;"+F+"&nbsp;&nbsp;",handler:function(){I()}});c=new Ext.Button({cls:"x-btn-medium",text:"&nbsp;&nbsp;"+G+"&nbsp;&nbsp;",handler:function(){J()}});a=new Ext.Panel({border:!1,frame:!1,layoutConfig:{},items:[a,c],defaults:{border:!1,frame:!1}});z=new Ext.Panel({border:!1,frame:!1,layout:"hbox",width:"90%",padding:5,layoutConfig:{},items:[u,{xtype:"spacer",width:"20px"},
b,{xtype:"spacer",width:"20px"},h,{xtype:"spacer",width:"20px"},a],defaults:{border:!1,frame:!1}});l(w);return z},reset:function(){l(w)}}};
