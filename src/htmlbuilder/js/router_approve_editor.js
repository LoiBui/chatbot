$(function(){var m=function(){this.sConditionListString="";this.sConditionList=this.createArrayString(9);this.sConditionConnect=this.sConditionValue=this.sConditionField=this.sConditionType=this.sCondition="";this.sConditionBoss=this.createArrayString(19);this.sConditionFieldText=this.createArrayString(8);this.sConditionSameDepartment=this.createArrayString(4);this.sConditionBossHtml=this.createArrayString(19);this.sConditionFieldTextHtml=this.createArrayString(8);this.sConditionSameDepartmentHtml=
this.createArrayString(4);this.iConditionCount=this.iConditionIndex=0};m.prototype.createArrayString=function(a){for(var c=[],d=0;d<=a;d++)c.push("");return c};m.prototype.Init=function(a){this.sConditionListString=a;a=this.sConditionListString.split(",");var c;for(c=0;c<a.length;c++)this.sConditionList[c]=a[c];for(c=0;19>=c;c++)this.sConditionBoss[c]=MyLang.getMsg("USERINFO_BOSS_EMAIL")+(c+1);this.sConditionFieldText[0]=MyLang.getMsg("USERINFO_EMAIL");this.sConditionFieldText[1]=MyLang.getMsg("USERINFO_FAMILY_NAME");
this.sConditionFieldText[2]=MyLang.getMsg("USERINFO_GIVEN_NAME");this.sConditionFieldText[3]=MyLang.getMsg("USERINFO_DEPARTMENT_1");this.sConditionFieldText[4]=MyLang.getMsg("USERINFO_DEPARTMENT_2");this.sConditionFieldText[5]=MyLang.getMsg("USERINFO_DEPARTMENT_3");this.sConditionFieldText[6]=MyLang.getMsg("USERINFO_DEPARTMENT_4");this.sConditionFieldText[7]=MyLang.getMsg("USERINFO_DEPARTMENT_5");this.sConditionFieldText[8]=MyLang.getMsg("USERINFO_JOB_TITLE");this.sConditionSameDepartment[0]=MyLang.getMsg("USERINFO_DEPARTMENT_1");
this.sConditionSameDepartment[1]=MyLang.getMsg("USERINFO_DEPARTMENT_2");this.sConditionSameDepartment[2]=MyLang.getMsg("USERINFO_DEPARTMENT_3");this.sConditionSameDepartment[3]=MyLang.getMsg("USERINFO_DEPARTMENT_4");this.sConditionSameDepartment[4]=MyLang.getMsg("USERINFO_DEPARTMENT_5");for(c=0;19>=c;c++)this.sConditionBossHtml[c]="boss_email_"+(c+1);this.sConditionFieldTextHtml[0]="email";this.sConditionFieldTextHtml[1]="family_name";this.sConditionFieldTextHtml[2]="given_name";this.sConditionFieldTextHtml[3]=
"department_1";this.sConditionFieldTextHtml[4]="department_2";this.sConditionFieldTextHtml[5]="department_3";this.sConditionFieldTextHtml[6]="department_4";this.sConditionFieldTextHtml[7]="department_5";this.sConditionFieldTextHtml[8]="job_title";this.sConditionSameDepartmentHtml[0]="department_1:__submitter_department_1";this.sConditionSameDepartmentHtml[1]="department_2:__submitter_department_2";this.sConditionSameDepartmentHtml[2]="department_3:__submitter_department_3";this.sConditionSameDepartmentHtml[3]=
"department_4:__submitter_department_4";this.sConditionSameDepartmentHtml[4]="department_5:__submitter_department_5";this.ConditionCountUp()};m.prototype.SetConditoinIndex=function(a){this.iConditionIndex=a;this.SetConditoinData(this.iConditionIndex)};m.prototype.SetConditoinData=function(a){var c=this.createArrayString(4),d;this.sCondition=this.sConditionList[a];d=this.sCondition.split(":");for(a=0;a<d.length;a++)c[a]=d[a];this.sConditionType=c[0];this.sConditionField=c[1];this.sConditionValue=c[2];
this.sConditionConnect=c[3]};m.prototype.GetConditionBoss=function(a){return this.sConditionBoss[a]};m.prototype.GetConditionFieldName=function(a){return this.sConditionFieldText[a]};m.prototype.GetConditionSameDepartment=function(a){return this.sConditionSameDepartment[a]};m.prototype.GetConditionExp=function(){var a="";switch(this.sConditionType){case "":a="";break;case "0":a=this.sConditionBoss[parseInt(this.sConditionValue)];break;case "1":a=this.sConditionFieldText[parseInt(this.sConditionField)]+
" = "+this.sConditionValue;break;case "2":a=MyLang.getMsg("APPROVE_COND_EXP_1")+this.sConditionSameDepartment[parseInt(this.sConditionValue)]+MyLang.getMsg("APPROVE_COND_EXP_2")}return a};m.prototype.GetConditionExp2=function(){var a="";switch(this.sConditionConnect){case "":a=this.GetConditionExp();break;case "0":a=this.GetConditionExp()+" "+MyLang.getMsg("OR_CONDITION");break;case "1":a=this.GetConditionExp()+" "+MyLang.getMsg("AND_CONDITION")}return a};m.prototype.ConditonListString=function(){return this.sConditionListString};
m.prototype.ConditonType=function(a){if("undefined"===typeof a)return this.sConditionType;this.sConditionType=a;this.SetConditionString()};m.prototype.ConditonField=function(a){if("undefined"===typeof a)return this.sConditionField;this.sConditionField=a;this.SetConditionString()};m.prototype.ConditonValue=function(a){if("undefined"===typeof a)return this.sConditionValue;this.sConditionValue=a;this.SetConditionString()};m.prototype.ConditonConnect=function(a){if("undefined"===typeof a)return this.sConditionConnect;
this.sConditionConnect=a;this.SetConditionString()};m.prototype.ConditonCount=function(){return this.iConditionCount};m.prototype.SetConditionString=function(){this.sCondition=this.sConditionType+":"+this.sConditionField+":"+this.sConditionValue+":"+this.sConditionConnect;this.sConditionList[this.iConditionIndex]=this.sCondition;this.UpdateConditionListString()};m.prototype.ConditionCountUp=function(){var a;for(a=this.iConditionCount=0;9>=a;a++)this.SetConditoinData(a),""!=this.sConditionType&&(this.iConditionCount+=
1);this.SetConditoinData(this.iConditionIndex)};m.prototype.DeleteCondition=function(a){var c;0<a&&a==this.iConditionCount-1&&(c=this.sConditionList[a-1],this.sConditionList[a-1]=c.substring(0,c.length-1));for(c=0;8>=c;c++)c>=a&&(this.sConditionList[c]=this.sConditionList[c+1]);this.sConditionList[9]="";this.UpdateConditionListString()};m.prototype.UpdateConditionListString=function(){var a;this.sConditionListString="";for(a=0;9>=a;a++)this.sConditionListString=""==this.sConditionList[a]?this.sConditionListString+
":::":this.sConditionListString+this.sConditionList[a],9>a&&(this.sConditionListString+=",");this.ConditionCountUp()};m.prototype.GetConditionHtml=function(){var a="",c="",d;for(d=0;d<=this.iConditionCount-1;d++){this.SetConditoinData(d);switch(this.sConditionType){case "0":a=this.sConditionBossHtml[parseInt(this.sConditionValue)];break;case "1":a=this.sConditionFieldTextHtml[parseInt(this.sConditionField)]+":"+this.sConditionValue;break;case "2":a=this.sConditionSameDepartmentHtml[parseInt(this.sConditionValue)]}d<
this.iConditionCount&&("0"==this.sConditionConnect.toString()?a+="|":"1"==this.sConditionConnect.toString()&&(a+=";"));c+=a}return c};WindowButtonSetting={currentColumn:-1,close:function(){var a=Ext.getCmp("window_button_setting");a&&a.close()},getPropertyKeys:function(a){var c=a="";switch(WindowButtonSetting.currentColumn){case 5:a="select_button";c="select_button_value";break;case 6:a="select_dep_button";c="select_dep_button_value";break;case 7:a="del_button",c="del_button_value"}return{name:a,
value:c}},showWindow:function(a,c,d){var b=Ext.getCmp("window_button_setting");b||(b=[],b.push(new Ext.Button({id:"btn_update_window_button_setting",text:MyLang.getMsg("BTN_UPDATE"),handler:function(){var a="",b="",d=$("#window_button_setting"),c=WindowButtonSetting.getPropertyKeys(),g=c.name,c=c.value,k,l,m=MainLayout.getRowSelected();if(m){k=parseInt(m.get("process_no"));for(l=1;l<=k-1;l++)d.find('input[name="ckProcess'+l+'"]').is(":checked")&&(""!=a&&(a+=" ",b+="<br>"),a+=l.toString().trim(),b=
b+MyLang.getMsg("PROCESS_NUMBER")+l);d.find('input[name="ckShinseiSha"]').is(":checked")?(a="1:"+a,b=MyLang.getMsg("AUTHOR_NAME")+"<br>"+b):a="0:"+a;m.set(g,b+"<br>");m.set(c,a)}WindowButtonSetting.close()}})),b.push(new Ext.Button({text:MyLang.getMsg("BTN_CANCEL"),handler:function(){WindowButtonSetting.close()}})),b=new Ext.Window({id:"window_button_setting",title:MyLang.getMsg("TITLE_WINDOW_BUTTON_SETTING"),layout:"fit",width:400,height:420,closeAction:"hide",plain:!0,modal:!0,items:new Ext.Panel({border:!1,
autoScroll:!0,html:'<div id="window_button_setting_content" class="container"></div>'}),buttons:b,listeners:{afterRender:function(){var b=$("#window_button_setting_content");b.html("");var f;f='<div class="main_title">'+("<span>"+MyLang.getMsg("APPROVER_ADD_BUTTON_EXP")+"</span>");f+="</div>";f+='<div class="item">';f+='<input name="ckShinseiSha" type="checkbox"> '+MyLang.getMsg("AUTHOR_NAME");f+="</div>";for(var e=1;20>=e;e++)f+='<div class="item">',f+='<input name="ckProcess'+e+'" type="checkbox"><span name="ckProcessCaption'+
e+'"> '+MyLang.getMsg("PROCESS_NUMBER")+e+"\uff1a</span>",f+="</div>";b.html(f);WindowButtonSetting.currentColumn=d;e=WindowButtonSetting.getPropertyKeys().value;e=c.get(e);""==e&&(e="0:");e=e.split(":");"1"==e[0]&&b.find('input[name="ckShinseiSha"]').prop("checked",!0);f=e[1].split(" ");for(e=0;e<f.length;e++)b.find('input[name="ckProcess'+f[e]+'"]').prop("checked",!0),b.find('span[name="ckProcessCaption'+f[e]+'"]').removeClass("disabled");f=parseInt(c.get("process_no"));for(var h=a.getStore(),e=
1;20>=e;e++){var g=b.find('input[name="ckProcess'+e+'"]'),k=b.find('span[name="ckProcessCaption'+e+'"]');e>=f&&(g.attr("disabled","disabled"),k.addClass("disabled"));(g=h.getAt(e))&&k.text(k.text()+g.get("approver_name"))}},hide:function(){WindowButtonSetting.close()}}}));b.show()}};WindowApproverCondition={callback:null,close:function(){var a=Ext.getCmp("window_approver_condition");a&&a.close()},PartsEnable:function(a,c){var d=$("#window_approver_condition_content"),b=d.find(':input[name="cmbBoss"]'),
p=d.find(':input[name="cmbFieldName"]'),f=d.find(':input[name="txtFieldValue"]'),d=d.find(':input[name="cmbSameDepartment"]');switch(a){case 0:1==c?b.removeAttr("disabled"):b.attr("disabled","disabled");break;case 1:1==c?(p.removeAttr("disabled"),f.removeAttr("disabled")):(p.attr("disabled","disabled"),f.attr("disabled","disabled"));break;case 2:1==c?d.removeAttr("disabled"):d.attr("disabled","disabled")}},showWindow:function(a){WindowApproverCondition.callback="function"===typeof a?a:null;a=Ext.getCmp("window_approver_condition");
a||(a=[],a.push(new Ext.Button({id:"btn_sign_up_window_approver_condition",text:MyLang.getMsg("BTN_SIGN_UP"),handler:function(){var a=$("#window_approver_condition_content"),d=a.find("#opBoss"),b=a.find("#opField"),p=a.find("#opSameDepartment"),f=a.find(':input[name="txtFieldValue"]'),e=a.find(':input[name="cmbFieldName"]'),h=a.find(':input[name="cmbBoss"]'),a=a.find(':input[name="cmbSameDepartment"]');b.is(":checked")&&""==f.val()?Ext.Msg.show({icon:Ext.MessageBox.INFO,msg:MyLang.getMsg("MSG_ALERT_1"),
buttons:Ext.Msg.OK}):(d.is(":checked")?WindowApprover.conditionManager.ConditonType("0"):b.is(":checked")?WindowApprover.conditionManager.ConditonType("1"):p.is(":checked")&&WindowApprover.conditionManager.ConditonType("2"),b.is(":checked")?WindowApprover.conditionManager.ConditonField(e.val()):WindowApprover.conditionManager.ConditonField(""),d.is(":checked")?WindowApprover.conditionManager.ConditonValue(h.val()):b.is(":checked")?WindowApprover.conditionManager.ConditonValue(f.val()):p.is(":checked")&&
WindowApprover.conditionManager.ConditonValue(a.val()),WindowApproverCondition.callback&&WindowApproverCondition.callback(),WindowApproverCondition.close())}})),a.push(new Ext.Button({text:MyLang.getMsg("BTN_CANCEL"),handler:function(){WindowApproverCondition.close()}})),a=new Ext.Window({id:"window_approver_condition",title:MyLang.getMsg("TITLE_WINDOW_APPROVER_CONDITION"),layout:"fit",width:400,height:450,closeAction:"hide",plain:!0,modal:!0,items:new Ext.Panel({border:!1,autoScroll:!0,html:'<div id="window_approver_condition_content" class="container"></div>'}),
buttons:a,listeners:{afterRender:function(){var a=$("#window_approver_condition_content");a.html("");var d;d='<div class="item"><input id="opBoss" name="cond" type="radio" checked> '+MyLang.getMsg("APPROVER_ADD_EXP_1");d+="</div>";d+='<div class="pdl20">';d+='<div class="item">';d+='<select name="cmbBoss" style="width: 120px;"></select>';d+="</div>";d+='<div class="item">';d+="<p>"+MyLang.getMsg("APPROVER_ADD_EXP_2")+"</p>";d+="</div>";d+="</div>";d+='<div class="item">';d+='<input id="opField" name="cond" type="radio"> '+
MyLang.getMsg("APPROVER_ADD_EXP_3");d+="</div>";d+='<div class="pdl20">';d+='<div class="item">';d+='<select name="cmbFieldName" style="width: 120px;"></select> \uff1d <input type="text" name="txtFieldValue">';d+="</div>";d+='<div class="item">';d+="<p>"+MyLang.getMsg("APPROVER_ADD_EXP_4")+"</p>";d+="</div>";d+="</div>";d+='<div class="item">';d+='<input id="opSameDepartment" name="cond" type="radio"> '+MyLang.getMsg("APPROVER_ADD_EXP_6");d+="</div>";d+='<div class="pdl20">';d+='<div class="item">';
d+='<select name="cmbSameDepartment" style="width: 120px;"></select>';d+="</div>";d+='<div class="item">';d+="<p>"+MyLang.getMsg("APPROVER_ADD_EXP_5")+"</p>";d+="</div>";d+="</div>";a.html(d);var b;d=a.find(':input[name="cmbBoss"]');d.html("");for(b=0;19>=b;b++)WindowApprover.conditionManager.GetConditionBoss(b)&&d.append('<option value="'+b+'">'+WindowApprover.conditionManager.GetConditionBoss(b)+"</option>");d.prop("selectedIndex",0);var p=a.find(':input[name="cmbFieldName"]');p.html("");for(b=
0;19>=b;b++)WindowApprover.conditionManager.GetConditionFieldName(b)&&p.append('<option value="'+b+'">'+WindowApprover.conditionManager.GetConditionFieldName(b)+"</option>");p.prop("selectedIndex",0);var f=a.find(':input[name="cmbSameDepartment"]');f.html("");for(b=0;19>=b;b++)WindowApprover.conditionManager.GetConditionSameDepartment(b)&&f.append('<option value="'+b+'">'+WindowApprover.conditionManager.GetConditionSameDepartment(b)+"</option>");f.prop("selectedIndex",0);WindowApproverCondition.PartsEnable(0,
!1);WindowApproverCondition.PartsEnable(1,!1);WindowApproverCondition.PartsEnable(2,!1);b=a.find("#opBoss");var e=a.find("#opField"),h=a.find("#opSameDepartment");switch(WindowApprover.conditionManager.ConditonType()){case "":WindowApproverCondition.PartsEnable(0,!0);b.prop("checked",!0);break;case "0":WindowApproverCondition.PartsEnable(0,!0);b.prop("checked",!0);d.prop("selectedIndex",WindowApprover.conditionManager.ConditonValue());break;case "1":WindowApproverCondition.PartsEnable(1,!0);e.prop("checked",
!0);p.prop("selectedIndex",WindowApprover.conditionManager.ConditonField());a.find(':input[name="txtFieldValue"]').val(WindowApprover.conditionManager.ConditonValue());break;case "2":WindowApproverCondition.PartsEnable(2,!0),h.prop("checked",!0),f.prop("selectedIndex",WindowApprover.conditionManager.ConditonValue())}b.click(function(){WindowApproverCondition.PartsEnable(0,!0);WindowApproverCondition.PartsEnable(1,!1);WindowApproverCondition.PartsEnable(2,!1)});e.click(function(){WindowApproverCondition.PartsEnable(0,
!1);WindowApproverCondition.PartsEnable(1,!0);WindowApproverCondition.PartsEnable(2,!1)});h.click(function(){WindowApproverCondition.PartsEnable(0,!1);WindowApproverCondition.PartsEnable(1,!1);WindowApproverCondition.PartsEnable(2,!0)})},hide:function(){WindowApproverCondition.close()}}}));a.show()}};WindowApprover={conditionManager:null,flg_cmbCondInit:0,close:function(){var a=Ext.getCmp("window_approver");a&&a.close()},PartsEdit:function(){var a=$("#window_approver_content"),c;for(c=1;10>=c;c++){var d=
a.find(':input[name="btnCond'+c+'"]'),b=a.find(':input[name="btnDel'+c+'"]'),p=a.find(':input[name="txtCond'+c+'"]'),f=a.find(':input[name="cmbCond'+c+'"]');c>WindowApprover.conditionManager.ConditonCount()?(b.attr("disabled","disabled"),p.attr("disabled","disabled")):(b.removeAttr("disabled"),p.removeAttr("disabled"));c-1>WindowApprover.conditionManager.ConditonCount()?d.attr("disabled","disabled"):d.removeAttr("disabled");10>c&&(c+1>WindowApprover.conditionManager.ConditonCount()?f.attr("disabled",
"disabled"):(f.removeAttr("disabled"),WindowApprover.conditionManager.SetConditoinIndex(c-1),""!=WindowApprover.conditionManager.ConditonConnect()&&f.prop("selectedIndex",WindowApprover.conditionManager.ConditonConnect())))}for(c=1;10>=c;c++)p=a.find(':input[name="txtCond'+c+'"]'),p.val("");for(c=1;c<=WindowApprover.conditionManager.ConditonCount();c++)WindowApprover.conditionManager.SetConditoinIndex(c-1),p=a.find(':input[name="txtCond'+c+'"]'),p.val(WindowApprover.conditionManager.GetConditionExp())},
btnCond_click:function(a){var c=$("#window_approver_content"),d=parseInt($(a).attr("idx"));WindowApprover.conditionManager.SetConditoinIndex(d-1);WindowApproverCondition.showWindow(function(){1<d&&(WindowApprover.conditionManager.SetConditoinIndex(d-2),WindowApprover.conditionManager.ConditonConnect(c.find(':input[name="cmbCond'+(d-1)+'"]').val()));WindowApprover.PartsEdit()})},cmbCond_change:function(a){var c=$("#window_approver_content");a=parseInt($(a).attr("idx"));1==WindowApprover.flg_cmbCondInit&&
WindowApprover.conditionManager.ConditonCount()>a&&(WindowApprover.conditionManager.SetConditoinIndex(a-1),WindowApprover.conditionManager.ConditonConnect(c.find(':input[name="cmbCond'+a+'"]').val()))},btnDel_click:function(a){a=parseInt($(a).attr("idx"));WindowApprover.conditionManager.DeleteCondition(a-1);WindowApprover.PartsEdit()},showWindow:function(a){var c=Ext.getCmp("window_approver");c||(c=[],c.push(new Ext.Button({id:"btn_update_window_approver",text:MyLang.getMsg("BTN_UPDATE"),handler:function(){var a,
b="";for(a=0;9>=a;a++)WindowApprover.conditionManager.SetConditoinIndex(a),""!=b&&""!=WindowApprover.conditionManager.GetConditionExp2()&&(b+="<br>"),b+=WindowApprover.conditionManager.GetConditionExp2();if(a=MainLayout.getRowSelected())a.set("condition",b+"<br>"),a.set("condition_value",WindowApprover.conditionManager.ConditonListString());WindowApprover.close()}})),c.push(new Ext.Button({text:MyLang.getMsg("BTN_CANCEL"),handler:function(){WindowApprover.close()}})),c=new Ext.Window({id:"window_approver",
title:MyLang.getMsg("TITLE_WINDOW_APPROVER"),layout:"fit",width:500,height:430,closeAction:"hide",plain:!0,modal:!0,items:new Ext.Panel({border:!1,autoScroll:!0,html:'<div id="window_approver_content" class="container"></div>'}),buttons:c,listeners:{afterRender:function(){var d=$("#window_approver_content");d.html("");var b;b='<table style="width: 100%" class="list" cellspacing="0" cellpadding="0">';for(var c=1;10>=c;c++)b+="<tr>",b+="<td>",b+='<button onclick="WindowApprover.btnCond_click(this);" idx="'+
c+'" name="btnCond'+c+'" style="width:71px;height:25px">'+MyLang.getMsg("CONDITIONS")+c+"</button>",b+="</td>",b+="<td>",b+='<input name="txtCond'+c+'" type="text" style="width: 95%;height:22px" disabled value="">',b+="</td>",b+="<td>",10!=c&&(b+='<select onchange="WindowApprover.cmbCond_change(this);" idx="'+c+'" name="cmbCond'+c+'" disabled style="width:100px;height:25px">',b+="</select>"),b+="</td>",b+="<td>",b+='<button onclick="WindowApprover.btnDel_click(this);" idx="'+c+'" name="btnDel'+c+
'" disabled  style="height:25px">'+MyLang.getMsg("BTN_DELETE")+"</button>",b+="</td>",b+="</tr>";d.html(b+"</tr></table>");c=new m;WindowApprover.conditionManager=c;c.Init(a.get("condition_value"));WindowApprover.flg_cmbCondInit=0;for(c=1;9>=c;c++)b=d.find(':input[name="cmbCond'+c+'"]'),b.append('<option value="0">'+MyLang.getMsg("OR_CONDITION")+"</option>"),b.append('<option value="1">'+MyLang.getMsg("AND_CONDITION")+"</option>"),b.prop("selectedIndex",0);WindowApprover.flg_cmbCondInit=1;WindowApprover.PartsEdit()},
hide:function(){WindowApprover.close()}}}));c.show()}};WindowStepProcess={close:function(){var a=Ext.getCmp("window_step_process");a&&a.close()},showWindow:function(a){var c=Ext.getCmp("window_step_process");c||(c=[],c.push(new Ext.Button({id:"btn_update_window_step_process",text:MyLang.getMsg("BTN_UPDATE"),handler:function(){var a,b,c=$("#window_step_process"),f=c.find('input[name="txtAutoApprove"]').val();if(""!=f&&IsNumeric(f)){c.find("#opOnly").is(":checked")?(a="0",b=MyLang.getMsg("APPROVE_SINGLE")):
(a="1",b=MyLang.getMsg("APPROVE_ALL_MEMBER"));c.find('input[name="ckSkipOk"]').is(":checked")?(a+=",1",b=b+"<br>"+MyLang.getMsg("APPROVE_SKIP")):a+=",0";a=a+","+f;"0"!=f&&(b=b+"<br>"+MyLang.getMsg("APPROVE_AUTO")+"("+f+MyLang.getMsg("DAY")+")");c.find('input[name="ckSendMail"]').is(":checked")?(a+=",1",b=b+"<br>"+MyLang.getMsg("CHECK_SEND_MAIL")):a+=",0";b+="<br>";if(c=MainLayout.getRowSelected())c.set("step_process",b),c.set("step_process_value",a);WindowStepProcess.close()}else Ext.Msg.show({icon:Ext.MessageBox.INFO,
msg:MyLang.getMsg("MSG_ALERT_2"),buttons:Ext.Msg.OK})}})),c.push(new Ext.Button({text:MyLang.getMsg("BTN_CANCEL"),handler:function(){WindowStepProcess.close()}})),c=new Ext.Window({id:"window_step_process",title:MyLang.getMsg("TITLE_WINDOW_STEP_PROCESS"),layout:"fit",width:400,height:420,closeAction:"hide",plain:!0,modal:!0,items:new Ext.Panel({border:!1,autoScroll:!0,html:'<div id="window_step_process_content" class="container"></div>'}),buttons:c,listeners:{afterRender:function(){var c=$("#window_step_process_content");
c.html("");var b;b='<div class="main_title">'+("<span>"+MyLang.getMsg("APPROVE_SINGLE_OR_ALL")+"</span>");b+="</div>";b+='<div class="group_box">';b+='<div class="item">';b+='<input id="opOnly" name="OnrlyOrAll" type="radio" checked> '+MyLang.getMsg("APPROVE_PROCESS_SINGLE")+" <br>";b+="</div>";b+='<div class="item">';b+='<input id="opAll" name="OnrlyOrAll" type="radio">'+MyLang.getMsg("APPROVE_PROCESS_ALL")+" <br>";b+="</div>";b+="</div>";b+='<div class="main_title">';b+="<span>"+MyLang.getMsg("APPROVE_SKIP_SETTING")+
"</span>";b+="</div>";b+='<div class="group_box">';b+='<div class="item">';b+='<input name="ckSkipOk" type="checkbox"> '+MyLang.getMsg("APPROVE_PROCESS_SKIP");b+="</div>";b+="</div>";b+='<div class="main_title">';b+="<span>"+MyLang.getMsg("APPROVE_AUTO_SETTING")+"</span>";b+="</div>";b+='<div class="group_box">';b+='<div class="item">';b+='<input name="txtAutoApprove" type="number" value="0" style="width:50px;"> '+MyLang.getMsg("APPROVE_AUTO_SETTING_EXP_1")+" <br><br>";b+="<span>"+MyLang.getMsg("APPROVE_AUTO_SETTING_EXP_2")+
"</span>";b+="</div>";b+="</div>";b+='<div class="main_title">';b+="<span>"+MyLang.getMsg("CHECK_SEND_NOTIFY")+"</span>";b+="</div>";b+='<div class="group_box">';b+='<div class="item">';b+='<input name="ckSendMail" type="checkbox"> '+MyLang.getMsg("CHECK_SEND_NOTIFY_EXP_1");b+="</div>";b+="</div>";c.html(b);b=a.get("step_process_value");""==b&&(b="0,0,0,0");b=b.split(",");"0"==b[0]?c.find("#opOnly").prop("checked",!0):c.find("#opAll").prop("checked",!0);"1"==b[1]&&c.find('input[name="ckSkipOk"]').prop("checked",
!0);c.find('input[name="txtAutoApprove"]').val(b[2]);"1"==b[3]&&c.find('input[name="ckSendMail"]').prop("checked",!0)},hide:function(){WindowStepProcess.close()}}}));c.show()}};WindowAction={close:function(){var a=Ext.getCmp("window_action");a&&a.close()},showWindow:function(a){var c=Ext.getCmp("window_action");c||(c=[],c.push(new Ext.Button({id:"btn_update_window_action",text:MyLang.getMsg("BTN_UPDATE"),handler:function(){var a,b,c=$("#window_action_content");c.find("#opApprove").is(":checked")?
(a="1",b=MyLang.getMsg("OPTION_APPROVE")):c.find("#opFinalApprove").is(":checked")?(a="2",b=MyLang.getMsg("OPTION_APPROVE_FINAL")):c.find("#opLook").is(":checked")&&(a="3",b=MyLang.getMsg("OPTION_ROUTING"));"1"==a||"2"==a?(c.find('input[name="ckNoReject"]').is(":checked")?(a+=",1",b=b+"<br>\u3000"+MyLang.getMsg("OPTION_NO_REJECTED")):a+=",0",c.find('input[name="ckNoRemand"]').is(":checked")?(a+=",1",b=b+"<br>\u3000"+MyLang.getMsg("OPTION_NO_REVERTED")):a+=",0",c.find('input[name="ckNoAgency"]').is(":checked")?
(a+=",1",b=b+"<br>\u3000"+MyLang.getMsg("OPTION_NO_AGENCY_APPROVE")):a+=",0"):a+=",0,0,0";if(c=MainLayout.getRowSelected())c.set("action_type",b),c.set("action_type_value",a);WindowAction.close()}})),c.push(new Ext.Button({text:MyLang.getMsg("BTN_CANCEL"),handler:function(){WindowAction.close()}})),c=new Ext.Window({id:"window_action",title:MyLang.getMsg("TITLE_WINDOW_ACTION"),layout:"fit",width:300,height:200,closeAction:"hide",plain:!0,modal:!0,items:new Ext.Panel({border:!1,autoScroll:!0,html:'<div id="window_action_content" class="container"></div>'}),
buttons:c,listeners:{afterRender:function(){var c=$("#window_action_content");c.html("");var b;b='<div class="item"><input id="opApprove" name="action_type" type="radio" checked> '+MyLang.getMsg("OPTION_APPROVE_PROCESS");b+='&nbsp;&nbsp;<input id="opFinalApprove" name="action_type" type="radio"> '+MyLang.getMsg("OPTION_APPROVE_PROCESS_FINAL");b+="</div>";b+='<div class="item pdl20">';b+='<input name="ckNoReject" type="checkbox"> '+MyLang.getMsg("OPTION_NO_REJECTED")+" <br>";b+='<input name="ckNoRemand" type="checkbox"> '+
MyLang.getMsg("OPTION_NO_REVERTED")+" <br>";b+='<input name="ckNoAgency" type="checkbox"> '+MyLang.getMsg("OPTION_NO_AGENCY_APPROVE");b+="</div>";b+='<div class="item">';b+='<input id="opLook" name="action_type" type="radio"> '+MyLang.getMsg("OPTION_ROUTING_PROCESS");b+="</div>";c.html(b);b=a.get("action_type_value").split(",");switch(b[0]){case "1":c.find("#opApprove").prop("checked",!0);break;case "2":c.find("#opFinalApprove").prop("checked",!0);break;case "3":c.find("#opLook").prop("checked",!0)}"1"==
b[1]&&c.find('input[name="ckNoReject"]').prop("checked",!0);"1"==b[2]&&c.find('input[name="ckNoRemand"]').prop("checked",!0);"1"==b[3]&&c.find('input[name="ckNoAgency"]').prop("checked",!0);c.find("#opApprove").click(function(){c.find('input[name="ckNoReject"]').removeAttr("disabled");c.find('input[name="ckNoRemand"]').removeAttr("disabled");c.find('input[name="ckNoAgency"]').removeAttr("disabled")});c.find("#opFinalApprove").click(function(){c.find('input[name="ckNoReject"]').removeAttr("disabled");
c.find('input[name="ckNoRemand"]').removeAttr("disabled");c.find('input[name="ckNoAgency"]').removeAttr("disabled")});c.find("#opLook").click(function(){c.find('input[name="ckNoReject"]').attr("disabled","disabled");c.find('input[name="ckNoRemand"]').attr("disabled","disabled");c.find('input[name="ckNoAgency"]').attr("disabled","disabled")})},hide:function(){WindowAction.close()}}}));c.show()}};MainLayout={handlerShowWindow:function(a,c,d,b){c=a.getStore().getAt(c);switch(d){case 0:break;case 1:break;
case 2:WindowAction.showWindow(c);break;case 3:WindowStepProcess.showWindow(c);break;case 4:WindowApprover.showWindow(c);break;case 8:break;default:WindowButtonSetting.showWindow(a,c,d)}},nextTab:function(a){a=parseInt(a);MyPanel.tabSet.setActiveTab(MyPanel.tabDefine[a].name)},createSampleData:function(){return["              ".split(" "),"              ".split(" "),"              ".split(" "),"              ".split(" "),"              ".split(" "),"              ".split(" "),"              ".split(" "),
"              ".split(" "),"              ".split(" "),"              ".split(" ")]},loadData:function(){var a=[];try{var c=$("#json_data_grid").val(),d=JSON.parse(c)}catch(b){return console.log(b),a}$.each(d,function(){a.push([this.process_no,this.approver_name,this.action_type,this.action_type_value,this.step_process,this.step_process_value,this.condition,this.condition_value,this.select_button,this.select_button_value,this.select_dep_button,this.select_dep_button_value,this.del_button,this.del_button_value,
this.update_class])});return a},getRowSelected:function(){var a=Ext.getCmp("grid_main"),c=null;a&&(c=a.getSelectionModel().getSelected());return c},createColumnGrid:function(){return new Ext.grid.ColumnModel({columns:[{id:"process_no",header:MyLang.getMsg("PROCESS_NO"),width:80,dataIndex:"process_no",row_selected:null,editor:new Ext.form.TextField({allowBlank:!0,listeners:{beforeshow:function(a){a.row_selected=MainLayout.getRowSelected()},change:function(a,c,d){c!=d&&a.row_selected&&(a=a.row_selected)&&
a.set("process_no",c)}}})},{id:"approver_name",header:MyLang.getMsg("APPROVER_NAME"),width:100,dataIndex:"approver_name",row_selected:null,editor:new Ext.form.TextField({allowBlank:!0,listeners:{beforeshow:function(a){a.row_selected=MainLayout.getRowSelected()},change:function(a,c,d){c!=d&&a.row_selected&&(a=a.row_selected)&&a.set("approver_name",c)}}})},{id:"action_type",header:MyLang.getMsg("ACTION_TYPE"),width:100,dataIndex:"action_type"},{id:"step_process",header:MyLang.getMsg("STEP_PROCESS"),
width:100,dataIndex:"step_process"},{id:"condition",header:MyLang.getMsg("CONDITION"),width:100,dataIndex:"condition"},{id:"select_button",header:MyLang.getMsg("SELECT_BUTTON"),width:100,dataIndex:"select_button"},{id:"select_dep_button",header:MyLang.getMsg("SELECT_DEP_BUTTON"),width:100,dataIndex:"select_dep_button"},{id:"del_button",header:MyLang.getMsg("DEL_BUTTON"),width:100,dataIndex:"del_button"},{id:"update_class",header:MyLang.getMsg("UPDATE_CLASS"),width:100,dataIndex:"update_class",row_selected:null,
editor:new Ext.form.TextField({allowBlank:!0,listeners:{beforeshow:function(a){a.row_selected=MainLayout.getRowSelected()},change:function(a,c,d){c!=d&&a.row_selected&&(a=a.row_selected)&&a.set("update_class",c)}}})}],defaults:{menuDisabled:!0,sortable:!1,draggable:!1}})},createDatastore:function(){return new Ext.data.ArrayStore({id:"store_main",fields:[{name:"process_no"},{name:"approver_name"},{name:"action_type"},{name:"action_type_value"},{name:"step_process"},{name:"step_process_value"},{name:"condition"},
{name:"condition_value"},{name:"select_button"},{name:"select_button_value"},{name:"select_dep_button"},{name:"select_dep_button_value"},{name:"del_button"},{name:"del_button_value"},{name:"update_class"}]})},init:function(){return new Ext.grid.EditorGridPanel({id:"grid_main",renderTo:"grid_main_render",layout:"fit",columnLines:!0,cm:MainLayout.createColumnGrid(),sm:new Ext.grid.RowSelectionModel({singleSelect:!0,listeners:{rowselect:function(a,c,d){selRecordStore=d}}}),bbar:[{xtype:"button",text:MyLang.getMsg("BTN_ADD"),
handler:function(){MainLayout.addNewRecord()}}],store:MainLayout.createDatastore(),autoExpandColumn:"condition",clicksToEdit:1,stripeRows:!0,stateId:"grid",height:400,listeners:{celldblclick:function(a,c,d,b){MainLayout.handlerShowWindow(a,c,d,b)},afterRender:function(){var a=Ext.getCmp("grid_main").getStore(),c=MainLayout.loadData();0===c.length&&(c=MainLayout.createSampleData());a.loadData(c)}}})},addNewRecord:function(a){var c=Ext.getCmp("grid_main"),d=c.getStore();d.getCount();var b=new (Ext.data.Record.create([{name:"process_no"},
{name:"approver_name"},{name:"action_type"},{name:"action_type_value"},{name:"step_process"},{name:"step_process_value"},{name:"condition"},{name:"condition_value"},{name:"select_button"},{name:"select_button_value"},{name:"select_dep_button"},{name:"select_dep_button_value"},{name:"del_button"},{name:"del_button_value"},{name:"update_class"}]))({process_no:"",approver_name:"",action_type:"",action_type_value:"0,0,0,0",step_process:"",step_process_value:"0,0,0,0",condition:"",condition_value:"",select_button:"",
select_button_value:"",select_dep_button:"",select_dep_button_value:"",del_button:"",del_button_value:"",update_class:""});c.stopEditing();d.add(b);c.startEditing(0,0);"function"===typeof a&&function(){a()}.defer(200)},generateHtmlRouteApprove:function(){var a="",c="",d="",b="",p="",f="",e="",h="",g="",k="",l="",q="",n,s=new m,r=$("#tabs-3"),b=r.find("#name_width_value").val(),p=r.find("#member_width_value").val(),a=r.find("#html_header_value").val(),d=r.find("#html_footer_value").val(),f=a;Ext.getCmp("grid_main").getStore().each(function(){if(""===
this.get("process_no").trim())return!0;e=c=r.find("#html_detail_value").val();h=this.get("process_no");g=h.toString();e=e.replace(/@NUM@/g,g);g=h=this.get("approver_name");e=e.replace(/@PROCESS_NAME@/g,g);e=e.replace(/@NAME_WIDTH@/g,b);e=e.replace(/@MEMBER_WIDTH@/g,p);h=this.get("action_type_value");""==h&&(h="1,0,0,0");n=h.split(",");switch(n[0]){case "1":g="";break;case "2":g="final_approve";break;case "3":g='approve_type="look"'}"1"==n[1]&&(g+=" no_reject");"1"==n[2]&&(g+=" no_remand");"1"==n[3]&&
(g+=" no_agency");e=e.replace(/@APPROVE_TYPE@/g,g.toString());h=this.get("step_process_value");""==h&&(h="0,0,0,0");n=h.split(",");"1"==n[0]&&(g="need_all_approve_to_go_next");"1"==n[1]&&(g+=" skip_ok");"0"!=n[2]&&(g=g+" "+'is_auto_approve approve_limit_days="@DAY@"'.replace(/@DAY@/g,n[2].toString()));"1"==n[3]&&(g+=" do_not_send_email");e=e.replace(/@STEP_PROCESS@/g,g);h=this.get("condition_value");s=new m;s.Init(h);g=s.GetConditionHtml();e=e.replace(/@CONDITION@/g,g);h=this.get("select_button_value");
""==h&&(h="0:");n=h.split(":");"0"==n[0]?(k="\x3c!--",l="--\x3e"):l=k="";e=e.replace(/@PRE_SEL_BTN_1@/g,k);e=e.replace(/@SUF_SEL_BTN_1@/g,l);""==n[1]?(k="\x3c!--",l="--\x3e"):(l=k="",g=n[1].toString());e=e.replace(/@PRE_SEL_BTN_2@/g,k);e=e.replace(/@SUF_SEL_BTN_2@/g,l);e=e.replace(/@SEL_SHOW_NUM@/g,g);h=this.get("select_dep_button_value");""==h&&(h="0:");n=h.split(":");"0"==n[0]?(k="\x3c!--",l="--\x3e"):l=k="";e=e.replace(/@PRE_SEL_DEP_BTN_1@/g,k);e=e.replace(/@SUF_SEL_DEP_BTN_1@/g,l);""==n[1]?(k=
"\x3c!--",l="--\x3e",g=""):(l=k="",g=n[1].toString());e=e.replace(/@PRE_SEL_DEP_BTN_2@/g,k);e=e.replace(/@SUF_SEL_DEP_BTN_2@/g,l);e=e.replace(/@SEL_DEP_SHOW_NUM@/g,g);h=this.get("select_dep_button_value");""==h&&(h="0:");n=h.split(":");"0"==n[0]?(k="\x3c!--",l="--\x3e"):l=k="";e=e.replace(/@PRE_SEL_DEP_BTN_1@/g,k);e=e.replace(/@SUF_SEL_DEP_BTN_1@/g,l);""==n[1]?(k="\x3c!--",l="--\x3e",g=""):(l=k="",g=n[1].toString());e=e.replace(/@PRE_SEL_DEP_BTN_2@/g,k);e=e.replace(/@SUF_SEL_DEP_BTN_2@/g,l);e=e.replace(/@SEL_DEP_SHOW_NUM@/g,
g);h=this.get("del_button_value");""==h&&(h="0:");n=h.split(":");"0"==n[0]?(k="\x3c!--",l="--\x3e",q=""):(l=k="",q="ok_to_remove");e=e.replace(/@PRE_CL_BTN_1@/g,k);e=e.replace(/@SUF_CL_BTN_1@/g,l);e=e.replace(/@OK_TO_REM@/g,q);""==n[1]?(k="\x3c!--",l="--\x3e",q=""):(l=k="",g=n[1].toString(),q='ok_to_remove_process_number="@PROCESS@"'.replace(/@PROCESS@/g,g));e=e.replace(/@PRE_CL_BTN_2@/g,k);e=e.replace(/@SUF_CL_BTN_2@/g,l);e=e.replace(/@OK_TO_REM_NUM@/g,q);e=e.replace(/@CL_SHOW_NUM@/g,g);h=this.get("update_class");
g=""==h?"":'ok_to_update_class="@CLASS@"'.replace(/@CLASS@/g,h);e=e.replace(/@UPDATE_CLASS@/g,g);f+=e});return f+=d}};Setting={has_loaded:!1,init:function(){if(!0!==this.has_loaded){var a=$("#tabs-3");a.find("#name_width_value").val($("#name_width_value_tmp").val());a.find("#member_width_value").val($("#member_width_value_tmp").val());a.find("#html_header_value").val($("#html_header_value_tmp").val());a.find("#html_detail_value").val($("#html_detail_value_tmp").val());a.find("#html_footer_value").val($("#html_footer_value_tmp").val());
this.has_loaded=!0}},getSettingData:function(){var a=$("#tabs-3");return{name_width_value:a.find("#name_width_value").val(),member_width_value:a.find("#member_width_value").val(),html_header_value:a.find("#html_header_value").val(),html_detail_value:a.find("#html_detail_value").val(),html_footer_value:a.find("#html_footer_value").val()}},enable_ctr:function(a){var c=$("#tabs-3");!0===a?(c.find("#name_width_value").removeAttr("disabled"),c.find("#member_width_value").removeAttr("disabled"),c.find("#html_header_value").removeAttr("disabled"),
c.find("#html_detail_value").removeAttr("disabled"),c.find("#html_footer_value").removeAttr("disabled")):(c.find("#name_width_value").attr("disabled","disabled"),c.find("#member_width_value").attr("disabled","disabled"),c.find("#html_header_value").attr("disabled","disabled"),c.find("#html_detail_value").attr("disabled","disabled"),c.find("#html_footer_value").attr("disabled","disabled"))},update:function(a){debugLog("=> Setting: update");a=$("#tabs-3");debugLog(a.find("#name_width_value").val());
debugLog(a.find("#member_width_value").val());debugLog(a.find("#html_header_value").val());debugLog(a.find("#html_detail_value").val());debugLog(a.find("#html_footer_value").val());a={name_width_value:a.find("#name_width_value").val(),member_width_value:a.find("#member_width_value").val(),html_header_value:a.find("#html_header_value").val(),html_detail_value:a.find("#html_detail_value").val(),html_footer_value:a.find("#html_footer_value").val()};Setting.enable_ctr(!1);Setting.request_update(a,function(a){Setting.enable_ctr(!0);
a&&Ext.Msg.show({icon:Ext.MessageBox.INFO,msg:MyLang.getMsg("SUCCESS_UPDATE"),buttons:Ext.Msg.OK})})},request_update:function(a,c){var d=$("#template_id").val(),b=$("#route_approve_body_id").val(),b={token:USER_TOKEN,route_approve_body_id:b};$.extend(b,a);Ext.Ajax.request({params:b,url:SATERAITO_MY_SITE_URL+"/"+SATERAITO_GOOGLE_APPS_DOMAIN+"/"+APP_ID+"/"+d+"/routerapprove",method:"POST",timeout:12E4,success:function(a,b){"status=ok"==a.responseText?c(!0):c(!1)},failure:function(){c(!1)}})}};ViewSource=
{elmViewSource:null,init:function(a){ViewSource.elmViewSource=$("#viewSource");ViewSource.viewSource();"function"==typeof a&&a()},viewSource:function(){ViewSource.elmViewSource.html("");try{var a=MainLayout.generateHtmlRouteApprove();ViewSource.elmViewSource.text(a);jQuery.fn.prettify=function(){this.html(prettyPrintOne(this.html()))};prettyPrint();ViewSource.elmViewSource.prettify();ViewSource.elmViewSource.attr("class","prettyprint lang-html linenums=true")}catch(c){console.log(c)}},beforePostMessage:function(){ViewSource.postMessage()},
postMessage:function(){Ext.Msg.show({icon:Ext.MessageBox.QUESTION,msg:MyLang.getMsg("MSG_SAVE_HTML_ROUTER_EDITOR"),buttons:Ext.Msg.OKCANCEL,fn:function(a){if("ok"==a){$("#template_id").val();a=MainLayout.generateHtmlRouteApprove();var c=[];Ext.getCmp("grid_main").getStore().each(function(){c.push({process_no:this.get("process_no"),approver_name:this.get("approver_name"),action_type:this.get("action_type"),action_type_value:this.get("action_type_value"),step_process:this.get("step_process"),step_process_value:this.get("step_process_value"),
condition:this.get("condition"),condition_value:this.get("condition_value"),select_button:this.get("select_button"),select_button_value:this.get("select_button_value"),select_dep_button:this.get("select_dep_button"),select_dep_button_value:this.get("select_dep_button_value"),del_button:this.get("del_button"),del_button_value:this.get("del_button_value"),update_class:this.get("update_class")})});var d={json_data_grid:JSON.stringify(c)},b={};b.router_approve_body=escapeAndEncodeHtml(a);testJsonIsOk(d)&&
testJsonIsOk(b)?Setting.request_update(d,function(a){a?(top.postMessage(JSON.stringify(b),"*"),window.close()):window.alert(MyLang.getMsg("MSG_SAVE_HTML_ERROR"))}):(window.alert(MyLang.getMsg("MSG_SAVE_UNDEFINED_ERROR")),window.close())}}})}};TabOne={create:function(a){a='<div id="tabs-1"><div id="template_body_html_builder_result" style="display: none;"></div>';a+='<div id="result" class="p10 bgWhite">';a+='<div class="p0">';a+='<div class="content">'+MyLang.getMsg("MSG_APPROVER_EDITOR_TAB_EXP");
a+="</div>";a+="<div>";a+='<div id="layoutMain" class="pwie">';a+='<div class="pwie">';a+='<table width="100%" cellpadding="10" cellspacing="0">';a+="<tbody>";a+="<tr>";a+='<td valign="top" style="min-width: 70%;">';a+='<div id="grid_main_render" class="ui-sortable">';a+="</div>";a+='<div class="clearL"></div>';a+="</td>";a+="</tr>";a+="</tbody>";a+="</table>";a+="</div>";a+='<div class="clearL"></div><br>';a+='<table cellspacing="10" width="100%" cellpadding="0" class="buttonLayer">';a+="<tbody>";
a+="<tr>";a+="<td>";a+='<input onclick="ViewSource.beforePostMessage()" type="button" class="newgraybtn" value="'+MyLang.getMsg("BTN_EDITOR_ROUTER_COMPLETE")+'"> &nbsp;';a+='<input onclick="MainLayout.nextTab(\'1\')" type="button"  class="newgraybtn" value="'+MyLang.getMsg("BTN_EDITOR_HTML_CONFIRM")+'"> &nbsp;';a+="</td>";a+="</tr>";a+="</tr>";a+="<tr>";a+='<td><span style="color: red;">'+MyLang.getMsg("MSG_EDITOR_COMPLETE_EXP_1")+"</span>";a+="</td>";a+="</tr>";a+="</tbody>";a+="</table>";a+="<br></div>";
a+="</div>";a+="</div>";a+="</div>";a+="</div>";a=new Ext.Panel({frame:!1,border:!1,margins:{top:0,right:5,bottom:0,left:5},html:a,autoScroll:!0});return new Ext.Panel({layout:"fit",frame:!1,border:!1,items:[a],height:460,listeners:{afterrender:function(){(function(){MainLayout.init()}).defer(10)}}})}};TabTwo={create:function(a){a='<div id="tabs-2"><div class="p10 bgWhite">';a+='<div class="content">';a+=MyLang.getMsg("MSG_HTML_SOURCE_TAB_EXP_1");a+="</div>";a+="<div>";a+='<table cellpadding="5" cellspacing="0">';
a+="<tbody>";a+="<tr>";a+="<td>";a+='<div class="newSelect" style="display: none">';a+="</div>";a+="</td>";a+='<td class="alignright pL10">';a+="</td>";a+="</tr>";a+="</tbody>";a+="</table><br>";a+='<div style="width: 100%; display: inline-block">';a+='<pre id="viewSource" style="width: 99%;" class="prettyprint lang-html linenums=true">';a+="</pre>";a+="</div>";a+="</div>";a+='<div class="clearL"></div><br>';a+='<table cellspacing="10" width="100%" cellpadding="0" class="buttonLayer">';a+="<tbody>";
a+="<tr>";a+="<td>";a+='<input onclick="ViewSource.beforePostMessage()" type="button" class="newgraybtn" value="'+MyLang.getMsg("BTN_EDITOR_ROUTER_COMPLETE")+'"> &nbsp;';a+='<input onclick="MainLayout.nextTab(\'0\');" type="button"  class="newgraybtn" value="'+MyLang.getMsg("BTN_EDITOR_SETTING_BACK")+'"> &nbsp;';a+="</td>";a+="</tr>";a+="<tr>";a+='<td><span style="color: red;">'+MyLang.getMsg("MSG_EDITOR_COMPLETE_EXP_1")+"</span>";a+="</td>";a+="</tr>";a+="</tbody>";a+="</table>";a+="</div>";a+="</div>";
a=new Ext.Panel({frame:!1,border:!1,margins:{top:0,right:5,bottom:0,left:5},html:a,autoScroll:!0});return new Ext.Panel({layout:"fit",frame:!1,border:!1,items:[a],height:460})}};TabThree={create:function(a){a='<div id="tabs-3"><div class="p10 bgWhite">';a+='<div class="content">';a+='<form id="form_setting">';a+='<table class="detail" style="width: 100%;">';a+="<tr>";a+='<td class="detail_name" width="30%">'+MyLang.getMsg("NAME_WIDTH_VALUE");a+="</td>";a+='<td class="detail_value" width="70%"><input id="name_width_value" type="text" value="30%">';
a+="</td>";a+="</tr>";a+="<tr>";a+='<td class="detail_name" width="30%">'+MyLang.getMsg("MEMBER_WIDTH_VALUE");a+="</td>";a+='<td class="detail_value" width="70%"><input id="member_width_value" type="text" value="70%">';a+="</td>";a+="</tr>";a+="<tr>";a+='<td class="detail_name" width="30%">'+MyLang.getMsg("HTML_HEADER_VALUE");a+="</td>";a+='<td class="detail_value" width="70%"><textarea id="html_header_value" style="width: 98%;vertical-align: middle;"><table class="detail" width="80%">\n</textarea>';
a+="</td>";a+="</tr>";a+="<tr>";a+='<td class="detail_name" width="30%">'+MyLang.getMsg("HTML_DETAIL_VALUE");a+="</td>";a+='<td class="detail_value" width="70%">';a+='<textarea id="html_detail_value" rows="12" style="width: 98%;vertical-align: middle;">';a+="\x3c!------------ \u3010\u30d7\u30ed\u30bb\u30b9@NUM@\uff1a@PROCESS_NAME@\u3011------------\x3e\n";a+="<tr>\n";a+='<td class="detail_name" width="@NAME_WIDTH@">@PROCESS_NAME@</td>\n';a+='<td class="detail_value" width="@MEMBER_WIDTH@">\n';a+=
'<input type="text" name="process" number="@NUM@" @APPROVE_TYPE@  disp="@PROCESS_NAME@" approver="@CONDITION@" @STEP_PROCESS@ @OK_TO_REM@ @OK_TO_REM_NUM@ @UPDATE_CLASS@>\n';a+="\x3c!--\u30e6\u30fc\u30b6\u30fc\u8ffd\u52a0\u30dc\u30bf\u30f3--\x3e\n";a+='@PRE_SEL_BTN_1@<input type="button" class="user_select_button" process_number="@NUM@" value="'+MyLang.getMsg("BTN_ADD_USER")+'">@SUF_SEL_BTN_1@\n';a+='@PRE_SEL_BTN_2@<input type="button" class="user_select_button" process_number="@NUM@" value="'+MyLang.getMsg("BTN_ADD_USER")+
'" ok_to_show_process_number="@SEL_SHOW_NUM@">@SUF_SEL_BTN_2@\n';a+="\x3c!--\u30e6\u30fc\u30b6\u30fc\u8ffd\u52a0\uff08\u90e8\u7f72\u6307\u5b9a\uff09\u30dc\u30bf\u30f3--\x3e\n";a+='@PRE_SEL_DEP_BTN_1@<input type="button" class="department_1_select_button" process_number="@NUM@" value="'+MyLang.getMsg("BTN_ADD_DEPARTMENT")+'">@SUF_SEL_DEP_BTN_1@\n';a+='@PRE_SEL_DEP_BTN_2@<input type="button" class="department_1_select_button" process_number="@NUM@" value="'+MyLang.getMsg("BTN_ADD_DEPARTMENT")+'" ok_to_show_process_number="@SEL_DEP_SHOW_NUM@">@SUF_SEL_DEP_BTN_2@\n';
a+="\x3c!--\u30af\u30ea\u30a2\u30dc\u30bf\u30f3--\x3e\n";a+='@PRE_CL_BTN_1@<input type="button" class="clear_approver_button" process_number="@NUM@" value="'+MyLang.getMsg("BTN_CLEAR")+'">@SUF_CL_BTN_1@\n';a+='@PRE_CL_BTN_2@<input type="button" class="clear_approver_button" process_number="@NUM@" value="'+MyLang.getMsg("BTN_CLEAR")+'" ok_to_show_process_number="@CL_SHOW_NUM@">@SUF_CL_BTN_2@\n';a+="</td>\n";a+="</tr>\n";a+="</textarea>";a+="</td>";a+="</tr>";a+="<tr>";a+='<td class="detail_name" width="30%">'+
MyLang.getMsg("HTML_FOOTER_VALUE");a+="</td>";a+='<td class="detail_value" width="70%"><textarea id="html_footer_value" style="width: 98%;vertical-align: middle;"></table>\n</textarea>';a+="</td>";a+="</tr>";a+="</table>";a+="<div>";a+='<input onclick="Setting.update(this)" type="button" style="margin-top: 5px;margin-left: 45%;width: 140px;" class="newgraybtn" value="'+MyLang.getMsg("BTN_UPDATE")+'">';a+="</div>";a+="</form>";a+="</div>";a+='<div id="resultHtml" style="display: none"></div>';a+="</div>";
a+="</div>";a+='<div class="clearL"></div><br>';a+='<table cellspacing="10" width="100%" cellpadding="0" class="buttonLayer">';a+="<tbody>";a+="<tr>";a+="<td>";a+='<input onclick="ViewSource.beforePostMessage()" type="button" class="newgraybtn" value="'+MyLang.getMsg("BTN_EDITOR_ROUTER_COMPLETE")+'"> &nbsp;';a+='<input onclick="MainLayout.nextTab(\'1\');" type="button" class="newgraybtn" value="'+MyLang.getMsg("BTN_EDITOR_HTML_CONFIRM")+'"> &nbsp;';a+="</td>";a+="</tr>";a+="</tr>";a+="<tr>";a+='<td><span style="color: red;">'+
MyLang.getMsg("MSG_EDITOR_COMPLETE_EXP_1")+"</span>";a+="</td>";a+="</tr>";a+="</tbody>";a+="</table>";a+="<br>";a+="</div>";a=new Ext.Panel({frame:!1,border:!1,margins:{top:0,right:5,bottom:0,left:5},html:a,autoScroll:!0});return new Ext.Panel({layout:"fit",frame:!1,border:!1,items:[a],height:460})}};MyPanel={hideAd:!1,tabSet:null,basePanel:null,tabDefine:[{name:"tabs-one",displayName:MyLang.getMsg("MSG_HTML_APPROVER_TAB")},{name:"tabs-two",displayName:MyLang.getMsg("MSG_HTML_SOURCE_TAB")},{name:"tabs-three",
displayName:MyLang.getMsg("MSG_HTML_SETTING_TAB")}],columnWrap:function(a){return'<div style="white-space:normal !important;">'+a+"</div>"},bindSectionClassHandler:function(){$(document).on("click","div.section_area_title",function(){var a=$(this).parent("div.section_area"),c=$(a).find("img.section_arrow_img"),a=$(a).find("div.section_show_hide_area");"none"==$(a).css("display")?($(a).show("normal"),$(c).attr("src",SATERAITO_MY_SITE_URL+"/images/arrowDown.gif")):($(a).hide("normal"),$(c).attr("src",
SATERAITO_MY_SITE_URL+"/images/arrowRight.gif"))})},createTab:function(a,c,d){d.region="center";return new Ext.Panel({id:a,tabName:a,autoWidth:!0,height:170,title:c,layout:"border",items:[d],listeners:{activate:MyPanel.handlerActivate}})},getHeaderHtml:function(){var a;a=""+('<div class="builder_header"><img src="'+BASE_URL+'/images/form_builder.png"/><span>');a+=MyLang.getMsg("MSG_HTML_ROUTER_APPROVER_EDITOR_TITLE");return a+"</span></div>"},buildPanel:function(){var a={deferredRender:!1,height:33,
html:MyPanel.getHeaderHtml(),region:"north",border:!1};MyPanel.getFooterHtml();MyPanel.tabSet=new Ext.TabPanel({id:"tab_set",activeTab:0,enableTabScroll:!0,plain:!0,items:[]});MyPanel.tabSet.region="center";mainPanel=new Ext.Panel({bodyStyle:"background-color:white;",layout:"border",items:[a,MyPanel.tabSet]});MyPanel.basePanel=new Ext.Viewport({renderTo:"html_editor_render",layout:"fit",autoWidth:!0,autoHeight:!0,style:"background-color: white;",items:[mainPanel]});Ext.util.CSS.createStyleSheet(".x-tab-strip span.x-tab-strip-text {font-size: "+
(11+MyPanel.fontSize)+"px}");Ext.util.CSS.createStyleSheet(".x-grid3-hd-row td {font-size: "+(11+MyPanel.fontSize)+"px; line-height:"+(15+MyPanel.fontSize)+"px}");Ext.util.CSS.createStyleSheet(".x-grid3-row td, .x-grid3-summary-row td {font-size: "+(11+MyPanel.fontSize)+"px; line-height:"+(15+MyPanel.fontSize)+"px; vertical-align: middle;}");Ext.util.CSS.createStyleSheet("a:visited {color: purple}");Ext.util.CSS.createStyleSheet(".sateraito {font-size: "+(12+MyPanel.fontSize)+"px}");$.each(MyPanel.tabDefine,
function(){switch(this.name){case MyPanel.tabDefine[0].name:var a=MyPanel.createTab(this.name,this.displayName,TabOne.create(this.name));MyPanel.tabSet.add(a);break;case MyPanel.tabDefine[1].name:a=MyPanel.createTab(this.name,this.displayName,TabTwo.create(this.name));MyPanel.tabSet.add(a);break;case MyPanel.tabDefine[2].name:a=MyPanel.createTab(this.name,this.displayName,TabThree.create(this.name)),MyPanel.tabSet.add(a)}});MyPanel.tabSet.setActiveTab(MyPanel.tabDefine[2].name);MyPanel.tabSet.setActiveTab(MyPanel.tabDefine[0].name);
MyPanel.bindSectionClassHandler();return!0},handlerActivate:function(a){switch(a.id){case MyPanel.tabDefine[1].name:ViewSource.init();break;case MyPanel.tabDefine[2].name:Setting.init()}},getFooterHtml:function(){return'<span style="text-decoration: underline;cursor: pointer" onclick="></span>'}};debugLog(" ++++ Init: SATERAITO HTML ROUTER APPROVE BUILDER !!! ++++ ");Ext.QuickTips.init();MyLang.setLocale(SATERAITO_LANG);MyPanel.buildPanel()});
